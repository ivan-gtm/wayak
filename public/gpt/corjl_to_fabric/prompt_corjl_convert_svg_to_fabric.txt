I made a mistake defining collections and templates, Could you rewrite code?, here is the assigment again.

Preconditions:
    [template] contain JSON in "fabric.js" format.
    [template] is stored on redis with key named "template:{id} is an alphanumeric 10 character string
    [template] must be unique on redis db.
    [Templates_folder] contains all templates and pages metadata on SVG files.
    Each [Templates_folder] could contain one or many templates.
    Each [template] have at least one page. All pages must be integrated into a single [template] redis key.
    [collection] is a group of [template]
    Each [collection] has a [collection_id] as name wich is composed by 6 alphanumeric characters.

Requirement:
* Scan for all redis keys starting with corjl:* 
* Fore each existing key take as "collection_id" the last part of the key name staring from ":" to the end of the string. For example for a key named "corjl:1G6765" [collection_id] would be "1G6765".
* Using [collection_id], scan files in path "/public/corjl/design/template/[collection_id]", [collection_id] is got on step 2. This folder contains a [collection] of [template]. Each svg file in folder represents a [template] page and will be converted using "convertSvgToFabric" function.
* As mentioned in preconditions, each [template] will be composed by one or many pages. And each [collection] folder may contain one or many [template].
* SVG files start with string "svg_template_*", where "*" is a number that represents a [template], this string is followed by "_page_+", where "+" represents the number of the page.

For example, this [collection] folder contains follwing files:
    svg_template_0_page_1.svg
    svg_template_0_page_2.svg
    svg_template_0_page_3.svg
    svg_template_1_page_1.svg
    svg_template_1_page_2.svg
    svg_template_1_page_3.svg
As result we expect 2 template redis keys, first [template] will contain 2 pages and second [template] will contain 3 pages.
* Each [template] page must be parsed and included on final json.
* Each new [template] redis key generated, will be stored on a redis key called "corj:converted_templates" its important to store collection name that belongs each template.

    

 

 % cd /Volumes/WAYAK/wayak/


